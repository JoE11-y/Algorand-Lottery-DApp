(this["webpackJsonpalgorand-lottery-dapp"]=this["webpackJsonpalgorand-lottery-dapp"]||[]).push([[0],{15:function(n,t,e){"use strict";(function(n){e.d(t,"e",(function(){return c})),e.d(t,"d",(function(){return s})),e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return l})),e.d(t,"a",(function(){return u}));var a=e(6),r=e(112),o=e.n(r),c=function(t){return n.from(t,"utf8").toString("base64")},s=function(n){if(n)return n.slice(0,5)+"..."+n.slice(n.length-5,n.length)},i=function(n){if(n)return new o.a(n).shiftedBy(-a.a).toFixed(3)},l=function(n){if(n)return new o.a(n).shiftedBy(a.a).toNumber()},u=function(n){if(0===n)return"--";var t=new Date(1e3*n);return t.toLocaleDateString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric"})+", "+t.toLocaleString("en-us",{hour:"numeric",minute:"numeric",hour12:!0})}}).call(this,e(16).Buffer)},169:function(n,t,e){"use strict";t.a='#pragma version 6\ntxn ApplicationID\nint 0\n==\nbnz main_l34\ntxn OnCompletion\nint DeleteApplication\n==\nbnz main_l33\ntxn OnCompletion\nint OptIn\n==\nbnz main_l32\ntxna ApplicationArgs 0\nbyte "start"\n==\nbnz main_l25\ntxna ApplicationArgs 0\nbyte "buy"\n==\nbnz main_l19\ntxna ApplicationArgs 0\nbyte "end"\n==\nbnz main_l15\ntxna ApplicationArgs 0\nbyte "check"\n==\nbnz main_l10\ntxna ApplicationArgs 0\nbyte "fund"\n==\nbnz main_l9\nerr\nmain_l9:\ntxn NumAccounts\nint 1\n==\nbyte "STATUS"\napp_global_get\nint 2\n==\n&&\nbyte "POOL"\napp_global_get\nint 1000000\n>\n&&\nglobal CurrentApplicationAddress\nbalance\nint 1000000\n>\n&&\nassert\nbyte "POOL"\napp_global_get\nstore 21\nbyte "NEXTLOTTERY"\napp_global_get\nstore 22\ntxna Accounts 1\nload 22\ncallsub sendfunds_1\nbyte "POOL"\nload 21\nload 22\n-\napp_global_put\nbyte "STATUS"\nint 3\napp_global_put\nint 1\nreturn\nmain_l10:\ntxna Accounts 0\ntxna Applications 0\napp_opted_in\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n>\n&&\nbyte "STATUS"\napp_global_get\nint 2\n==\n&&\ntxna Accounts 0\nbyte "ISWINNER"\napp_local_get\nint 0\n==\n&&\nassert\nbyte "WINNINGTICKET"\napp_global_get\nstore 4\nload 4\nint 1000\n/\nstore 0\nload 4\nint 1000\n%\nint 8\n/\nstore 2\nload 4\nint 1000\n%\nint 8\n%\nstore 3\nload 0\ncallsub convertuinttobytes_0\nstore 1\ntxna Accounts 0\ntxna Applications 0\nload 1\napp_local_get_ex\nstore 6\nstore 5\nload 6\n!\nbnz main_l14\nmain_l11:\ntxna Accounts 0\nload 1\napp_local_get\nload 2\ngetbyte\nload 3\ngetbit\nstore 19\nload 19\nint 1\n==\nbnz main_l13\nmain_l12:\ntxna Accounts 0\nbyte "ISWINNER"\nload 19\nint 1\n+\napp_local_put\nint 1\nreturn\nmain_l13:\nbyte "WINNERREWARD"\napp_global_get\nstore 20\ntxna Accounts 0\nload 20\ncallsub sendfunds_1\nbyte "WINNER"\ntxn Sender\napp_global_put\nb main_l12\nmain_l14:\ntxna Accounts 0\nload 1\nbyte 0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\napp_local_put\nb main_l11\nmain_l15:\ntxna Accounts 0\ntxna Applications 0\napp_opted_in\nbyte "TICKETS"\napp_global_get\nint 5\n>=\nbyte "PLAYERS"\napp_global_get\nint 2\n>=\n&&\nint 0\n==\n||\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n>\n&&\nassert\nbyte "TICKETS"\napp_global_get\nint 5\n>=\nbyte "PLAYERS"\napp_global_get\nint 2\n>=\n&&\nbnz main_l18\ngtxn 0 RekeyTo\nglobal ZeroAddress\n==\nassert\nbyte "DURATION"\napp_global_get\nstore 18\nbyte "END"\nglobal LatestTimestamp\nload 18\n+\napp_global_put\nmain_l17:\nint 1\nreturn\nmain_l18:\ngtxn 0 RekeyTo\nglobal ZeroAddress\n==\ngtxn 1 RekeyTo\nglobal ZeroAddress\n==\n&&\nassert\nglobal GroupSize\nint 2\n==\ntxn GroupIndex\nint 0\n==\n&&\ntxn NumAccounts\nint 3\n==\n&&\ngtxn 1 TypeEnum\nint pay\n==\n&&\ngtxn 1 Receiver\nglobal CurrentApplicationAddress\n==\n&&\ngtxn 1 CloseRemainderTo\nglobal ZeroAddress\n==\n&&\ngtxn 1 Amount\nint 1000000\n>=\n&&\nassert\nbyte "x"\nbyte "a"\napp_global_get\nbyte "x"\napp_global_get\n*\nbyte "c"\napp_global_get\n+\nbyte "m"\napp_global_get\n%\napp_global_put\nbyte "WINNINGTICKET"\nbyte "x"\napp_global_get\nbyte "TICKETS"\napp_global_get\n%\napp_global_put\nbyte "POOL"\napp_global_get\nint 5\n*\nint 100\n/\nstore 16\nbyte "WINNERREWARD"\nbyte "POOL"\napp_global_get\nint 50\n*\nint 100\n/\napp_global_put\nbyte "NEXTLOTTERY"\nbyte "POOL"\napp_global_get\nint 35\n*\nint 100\n/\napp_global_put\ntxna Accounts 1\nload 16\ncallsub sendfunds_1\ntxna Accounts 2\nload 16\ncallsub sendfunds_1\ntxna Accounts 3\nload 16\ncallsub sendfunds_1\nbyte "POOL"\napp_global_get\nstore 17\nbyte "POOL"\nload 17\nload 16\nint 3\n*\n-\napp_global_put\nbyte "STATUS"\nint 2\napp_global_put\nb main_l17\nmain_l19:\ngtxn 0 RekeyTo\nglobal ZeroAddress\n==\ngtxn 1 RekeyTo\nglobal ZeroAddress\n==\n&&\nassert\ntxna Accounts 0\ntxna Applications 0\napp_opted_in\nglobal GroupSize\nint 2\n==\n&&\ntxn GroupIndex\nint 0\n==\n&&\ntxn NumAppArgs\nint 2\n==\n&&\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n<\n&&\nbyte "STATUS"\napp_global_get\nint 1\n==\n&&\ntxna Accounts 0\nbyte "TICKETCOUNT"\napp_local_get\nint 1000\n<=\n&&\nbyte "TICKETS"\napp_global_get\nint 13000\n<\n&&\ntxna ApplicationArgs 1\nbtoi\nint 100\n<=\n&&\ngtxn 1 TypeEnum\nint pay\n==\n&&\ngtxn 1 Receiver\nglobal CurrentApplicationAddress\n==\n&&\ngtxn 1 CloseRemainderTo\nglobal ZeroAddress\n==\n&&\ngtxn 1 Amount\nbyte "PRICE"\napp_global_get\ntxna ApplicationArgs 1\nbtoi\n*\n==\n&&\ngtxn 1 Sender\ngtxn 0 Sender\n==\n&&\nassert\nbyte "TICKETS"\napp_global_get\nstore 12\nload 12\ntxna ApplicationArgs 1\nbtoi\n+\nstore 13\ntxna Accounts 0\nbyte "TICKETCOUNT"\napp_local_get\nstore 14\nload 12\nstore 4\nmain_l20:\nload 4\nload 13\n<\nbnz main_l22\ntxna Accounts 0\nbyte "TICKETCOUNT"\nload 14\ntxna ApplicationArgs 1\nbtoi\n+\napp_local_put\nbyte "TICKETS"\nload 13\napp_global_put\nbyte "POOL"\napp_global_get\nstore 15\nbyte "POOL"\nload 15\ngtxn 1 Amount\n+\napp_global_put\nbyte "x"\nbyte "a"\napp_global_get\nbyte "x"\napp_global_get\n*\nbyte "c"\napp_global_get\n+\nbyte "m"\napp_global_get\n%\napp_global_put\nint 1\nreturn\nmain_l22:\nload 4\nint 1000\n/\nstore 0\nload 4\nint 1000\n%\nint 8\n/\nstore 2\nload 4\nint 1000\n%\nint 8\n%\nstore 3\nload 0\ncallsub convertuinttobytes_0\nstore 1\ntxna Accounts 0\ntxna Applications 0\nload 1\napp_local_get_ex\nstore 6\nstore 5\nload 6\n!\nbnz main_l24\nmain_l23:\ntxna Accounts 0\nload 1\ntxna Accounts 0\nload 1\napp_local_get\nload 2\ntxna Accounts 0\nload 1\napp_local_get\nload 2\ngetbyte\nload 3\nint 1\nsetbit\nsetbyte\napp_local_put\nload 4\nint 1\n+\nstore 4\nb main_l20\nmain_l24:\ntxna Accounts 0\nload 1\nbyte 0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\napp_local_put\nb main_l23\nmain_l25:\ngtxn 0 RekeyTo\nglobal ZeroAddress\n==\ngtxn 1 RekeyTo\nglobal ZeroAddress\n==\n&&\nassert\nglobal GroupSize\nint 2\n==\ntxn GroupIndex\nint 0\n==\n&&\ngtxn 1 TypeEnum\nint pay\n==\n&&\ngtxn 1 Receiver\nglobal CurrentApplicationAddress\n==\n&&\ngtxn 1 CloseRemainderTo\nglobal ZeroAddress\n==\n&&\ngtxn 1 Amount\nint 1000000\n>=\n&&\ngtxn 1 Sender\ngtxn 0 Sender\n==\n&&\ntxn NumApplications\nint 1\n==\n&&\nassert\nbyte "START"\nglobal LatestTimestamp\napp_global_put\nbyte "END"\nglobal LatestTimestamp\nbyte "DURATION"\napp_global_get\n+\napp_global_put\nbyte "STARTER"\ntxn Sender\napp_global_put\nbyte "STATUS"\nint 1\napp_global_put\nbyte "PREVAPP"\napp_global_get\nint 0\n!=\ntxna Applications 1\nbyte "PREVAPP"\napp_global_get\n==\n&&\nbnz main_l27\nmain_l26:\nint 1\nreturn\nmain_l27:\ntxn Fee\nglobal MinTxnFee\nint 2\n*\n>=\nassert\ntxna Applications 1\nbyte "x"\napp_global_get_ex\nstore 9\nstore 8\nload 9\nbnz main_l31\nmain_l28:\nitxn_begin\nint appl\nitxn_field TypeEnum\ntxna Applications 1\nitxn_field ApplicationID\nint NoOp\nitxn_field OnCompletion\nbyte "fund"\nitxn_field ApplicationArgs\nglobal CurrentApplicationAddress\nitxn_field Accounts\nint 0\nitxn_field Fee\nitxn_submit\ntxna Applications 1\nbyte "NEXTLOTTERY"\napp_global_get_ex\nstore 11\nstore 10\nload 11\nbnz main_l30\nbyte "POOL"\nint 0\napp_global_put\nb main_l26\nmain_l30:\nbyte "POOL"\nload 10\napp_global_put\nb main_l26\nmain_l31:\nbyte "x"\nload 8\napp_global_put\nb main_l28\nmain_l32:\nglobal LatestTimestamp\nbyte "END"\napp_global_get\n<\nbyte "STATUS"\napp_global_get\nint 1\n==\n&&\nbyte "TICKETS"\napp_global_get\nint 13000\n<\n&&\nassert\nbyte "PLAYERS"\napp_global_get\nstore 7\ntxna Accounts 0\nbyte "ID"\nload 7\nint 1\n+\napp_local_put\nbyte "PLAYERS"\nload 7\nint 1\n+\napp_global_put\ntxna Accounts 0\nbyte "TICKETCOUNT"\nint 0\napp_local_put\ntxna Accounts 0\nbyte "ISWINNER"\nint 0\napp_local_put\nint 1\nreturn\nmain_l33:\ntxn Sender\nglobal CreatorAddress\n==\nbyte "STATUS"\napp_global_get\nint 0\n==\nbyte "STATUS"\napp_global_get\nint 3\n==\n||\n&&\nreturn\nmain_l34:\ngtxn 0 RekeyTo\nglobal ZeroAddress\n==\nassert\ntxn Note\nbyte "algorandlottery:uv2"\n==\ntxn NumAppArgs\nint 2\n==\n&&\ntxna ApplicationArgs 0\nbtoi\nint 0\n!=\n&&\ntxna ApplicationArgs 1\nbtoi\nint 0\n>\n&&\ntxn NumApplications\nint 1\n==\n&&\nassert\nbyte "PREVAPP"\ntxna Applications 1\napp_global_put\nbyte "DURATION"\ntxna ApplicationArgs 0\nbtoi\napp_global_put\nbyte "PRICE"\ntxna ApplicationArgs 1\nbtoi\napp_global_put\nbyte "PLAYERS"\nint 0\napp_global_put\nbyte "TICKETS"\nint 0\napp_global_put\nbyte "POOL"\nint 0\napp_global_put\nbyte "STATUS"\nint 0\napp_global_put\nbyte "a"\nint 75\napp_global_put\nbyte "c"\nint 74\napp_global_put\nbyte "m"\nint 65537\napp_global_put\nbyte "x"\nint 28652\napp_global_put\nint 1\nreturn\n\n// convert_uint_to_bytes\nconvertuinttobytes_0:\nstore 23\nload 23\nint 0\n==\nbnz convertuinttobytes_0_l5\nbyte ""\nstore 24\nload 23\nstore 25\nconvertuinttobytes_0_l2:\nload 25\nint 0\n>\nbnz convertuinttobytes_0_l4\nload 24\nb convertuinttobytes_0_l6\nconvertuinttobytes_0_l4:\nload 25\nint 10\n%\nstore 26\nbyte "0123456789"\nload 26\nload 26\nint 1\n+\nsubstring3\nload 24\nconcat\nstore 24\nload 25\nint 10\n/\nstore 25\nb convertuinttobytes_0_l2\nconvertuinttobytes_0_l5:\nbyte "0"\nconvertuinttobytes_0_l6:\nretsub\n\n// send_funds\nsendfunds_1:\nstore 28\nstore 27\nitxn_begin\nint pay\nitxn_field TypeEnum\nload 27\nitxn_field Receiver\nload 28\nitxn_field Amount\nitxn_submit\nretsub'},170:function(n,t,e){"use strict";t.a="#pragma version 6\nint 1\nreturn"},201:function(n,t){},203:function(n,t){},213:function(n,t){},215:function(n,t){},242:function(n,t){},244:function(n,t){},245:function(n,t){},250:function(n,t){},252:function(n,t){},271:function(n,t){},283:function(n,t){},286:function(n,t){},30:function(n,t,e){"use strict";(function(n){e.d(t,"a",(function(){return g})),e.d(t,"e",(function(){return _})),e.d(t,"j",(function(){return f})),e.d(t,"i",(function(){return m})),e.d(t,"b",(function(){return O})),e.d(t,"g",(function(){return h})),e.d(t,"c",(function(){return y})),e.d(t,"f",(function(){return T})),e.d(t,"h",(function(){return v})),e.d(t,"d",(function(){return I}));var a=e(59),r=e(13),o=e(53),c=e(54),s=e(8),i=e.n(s),l=e(11),u=e.n(l),p=e(6),d=e(87),b=e(169),A=e(170),x=e(15),g=Object(o.a)((function n(t,e,a,r,o,s,i,l,u,p,d,b,A,x,g,j,_,f,m,O){Object(c.a)(this,n),this.appId=t,this.appAddress=e,this.creatorAddress=a,this.lottery_duration=r,this.lottery_start_time=o,this.lottery_end_time=s,this.total_no_of_players=i,this.total_no_of_tickets=l,this.ticket_price=u,this.prize_pool=p,this.status=d,this.winning_ticket=b,this.starter=A,this.ender=x,this.winner=g,this.next_lottery_fund=j,this.prev_app=_,this.user_id=f,this.user_no_of_tickets=m,this.user_is_winner=O})),j=function(){var t=Object(r.a)(i.a.mark((function t(e){var a,r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new TextEncoder,r=a.encode(e),t.next=4,p.b.compile(r).do();case 4:return o=t.sent,t.abrupt("return",new Uint8Array(n.from(o.result,"base64")));case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),_=function(){var n=Object(r.a)(i.a.mark((function n(t,e,a){var r,o,c,s,l,d,x,g,_,f,m,O,h,y;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Creating new Lottery..."),n.next=3,p.b.getTransactionParams().do();case 3:return r=n.sent,n.next=6,j(b.a);case 6:return o=n.sent,n.next=9,j(A.a);case 9:return c=n.sent,s=u.a.encodeUint64(e.duration),l=u.a.encodeUint64(e.ticketPrice),d=(new TextEncoder).encode(p.e),x=[s,l],g=[a.appId],console.log(g),_=u.a.makeApplicationCreateTxnFromObject({from:t,suggestedParams:r,onComplete:u.a.OnApplicationComplete.NoOpOC,approvalProgram:o,clearProgram:c,numLocalInts:p.k,numLocalByteSlices:p.j,numGlobalInts:p.i,numGlobalByteSlices:p.h,note:d,appArgs:x,foreignApps:g}),f=_.txID().toString(),n.next=20,p.g.signTransaction(_.toByte());case 20:return m=n.sent,console.log("Signed transaction with txID: %s",f),n.next=24,p.b.sendRawTransaction(m.blob).do();case 24:return n.next=26,u.a.waitForConfirmation(p.b,f,4);case 26:return O=n.sent,console.log("Transaction "+f+" confirmed in round "+O["confirmed-round"]),n.next=30,p.b.pendingTransactionInformation(f).do();case 30:return h=n.sent,y=h["application-index"],console.log("Created new app-id: ",y),n.abrupt("return",y);case 34:case"end":return n.stop()}}),n)})));return function(t,e,a){return n.apply(this,arguments)}}(),f=function(){var n=Object(r.a)(i.a.mark((function n(t,e){var a,r,o,c,s,l,d,b,A,g,j,_,f;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Starting Lottery..."),n.next=3,p.b.getTransactionParams().do();case 3:for(a=n.sent,r=(new TextEncoder).encode("start"),o=[r],c=[e.prev_app],0!==e.prev_app&&(a.fee=2*u.a.ALGORAND_MIN_TX_FEE,a.flatFee=!0),s=Object(x.c)(1),l=u.a.makeApplicationCallTxnFromObject({from:t,appIndex:e.appId,onComplete:u.a.OnApplicationComplete.NoOpOC,suggestedParams:a,appArgs:o,foreignApps:c}),d=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:t,to:e.appAddress,amount:s,suggestedParams:a}),b=[l,d],A=u.a.computeGroupID(b),g=0;g<2;g++)b[g].group=A;return n.next=16,p.g.signTransaction(b.map((function(n){return n.toByte()})));case 16:return j=n.sent,console.log("Signed group transaction"),n.next=20,p.b.sendRawTransaction(j.map((function(n){return n.blob}))).do();case 20:return _=n.sent,n.next=23,u.a.waitForConfirmation(p.b,_.txId,4);case 23:f=n.sent,console.log("Group transaction "+_.txId+" confirmed in round "+f["confirmed-round"]);case 25:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),m=function(){var n=Object(r.a)(i.a.mark((function n(t,e){var a,r,o,c,s,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Opting in......"),n.next=3,p.b.getTransactionParams().do();case 3:return a=n.sent,r=u.a.makeApplicationOptInTxnFromObject({from:t,suggestedParams:a,appIndex:e}),o=r.txID().toString(),n.next=8,p.g.signTransaction(r.toByte());case 8:return c=n.sent,console.log("Signed transaction with txID: %s",o),n.next=12,p.b.sendRawTransaction(c.blob).do();case 12:return n.next=14,u.a.waitForConfirmation(p.b,o,4);case 14:return s=n.sent,console.log("Transaction "+o+" confirmed in round "+s["confirmed-round"]),n.next=18,p.b.pendingTransactionInformation(o).do();case 18:l=n.sent,console.log("Opted-in to app-id:",l.txn.txn.apid);case 20:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),O=function(){var n=Object(r.a)(i.a.mark((function n(t,e,a){var r,o,c,s,l,d,b,A,x,g,j,_;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Buying Tickets..."),n.next=3,p.b.getTransactionParams().do();case 3:for(r=n.sent,o=u.a.encodeUint64(Number(a)),c=(new TextEncoder).encode("buy"),s=[c,o],l=u.a.makeApplicationCallTxnFromObject({from:t,appIndex:e.appId,onComplete:u.a.OnApplicationComplete.NoOpOC,suggestedParams:r,appArgs:s}),d=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:t,to:e.appAddress,amount:e.ticket_price*a,suggestedParams:r}),b=[l,d],A=u.a.computeGroupID(b),x=0;x<2;x++)b[x].group=A;return n.next=14,p.g.signTransaction(b.map((function(n){return n.toByte()})));case 14:return g=n.sent,console.log("Signed group transaction"),n.next=18,p.b.sendRawTransaction(g.map((function(n){return n.blob}))).do();case 18:return j=n.sent,n.next=21,u.a.waitForConfirmation(p.b,j.txId,4);case 21:_=n.sent,console.log("Group transaction "+j.txId+" confirmed in round "+_["confirmed-round"]);case 23:case"end":return n.stop()}}),n)})));return function(t,e,a){return n.apply(this,arguments)}}(),h=function(){var n=Object(r.a)(i.a.mark((function n(t,e){var a,r,o,c,s,l,d,b,A,g,j,_,f,m,O;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Ending Lottery..."),n.next=3,p.b.getTransactionParams().do();case 3:if(a=n.sent,r=Object(x.c)(1),o=(new TextEncoder).encode("end"),c=[o],s=u.a.makeApplicationCallTxnFromObject({from:t,appIndex:e.appId,onComplete:u.a.OnApplicationComplete.NoOpOC,suggestedParams:a,appArgs:c,accounts:[e.starter,t,e.creatorAddress]}),!(e.total_no_of_players<2||e.total_no_of_tickets<5)){n.next=22;break}return l=s.txID().toString(),n.next=12,p.g.signTransaction(s.toByte());case 12:return d=n.sent,console.log("Signed transaction with txID: %s",l),n.next=16,p.b.sendRawTransaction(d.blob).do();case 16:return n.next=18,u.a.waitForConfirmation(p.b,l,4);case 18:b=n.sent,console.log("Transaction "+l+" confirmed in round "+b["confirmed-round"]),n.next=37;break;case 22:for(A=u.a.makePaymentTxnWithSuggestedParamsFromObject({from:t,to:e.appAddress,amount:r,suggestedParams:a}),g=[s,A],j=u.a.computeGroupID(g),_=0;_<2;_++)g[_].group=j;return n.next=28,p.g.signTransaction(g.map((function(n){return n.toByte()})));case 28:return f=n.sent,console.log("Signed group transaction"),n.next=32,p.b.sendRawTransaction(f.map((function(n){return n.blob}))).do();case 32:return m=n.sent,n.next=35,u.a.waitForConfirmation(p.b,m.txId,4);case 35:O=n.sent,console.log("Group transaction "+m.txId+" confirmed in round "+O["confirmed-round"]);case 37:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),y=function(){var n=Object(r.a)(i.a.mark((function n(t,e){var a,r,o,c,s,l,d;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Running check..."),n.next=3,p.b.getTransactionParams().do();case 3:return a=n.sent,r=(new TextEncoder).encode("check"),o=[r],c=u.a.makeApplicationCallTxnFromObject({from:t,appIndex:e.appId,onComplete:u.a.OnApplicationComplete.NoOpOC,suggestedParams:a,appArgs:o}),s=c.txID().toString(),n.next=10,p.g.signTransaction(c.toByte());case 10:return l=n.sent,console.log("Signed transaction with txID: %s",s),n.next=14,p.b.sendRawTransaction(l.blob).do();case 14:return n.next=16,u.a.waitForConfirmation(p.b,s,4);case 16:d=n.sent,console.log("Transaction "+s+" confirmed in round "+d["confirmed-round"]);case 18:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),T=function(){var n=Object(r.a)(i.a.mark((function n(t,e){var a,r,o,c,s,l,d;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Deleting application"),n.next=3,p.b.getTransactionParams().do();case 3:return a=n.sent,r=u.a.makeApplicationDeleteTxnFromObject({from:t,suggestedParams:a,appIndex:e}),o=r.txID().toString(),n.next=8,p.g.signTransaction(r.toByte());case 8:return c=n.sent,console.log("Signed transaction with txID: %s",o),n.next=12,p.b.sendRawTransaction(c.blob).do();case 12:return n.next=14,u.a.waitForConfirmation(p.b,o,4);case 14:return s=n.sent,console.log("Transaction "+o+" confirmed in round "+s["confirmed-round"]),n.next=18,p.b.pendingTransactionInformation(o).do();case 18:l=n.sent,d=l.txn.txn.apid,console.log("Deleted app-id: ",d);case 21:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),v=function(){var t=Object(r.a)(i.a.mark((function t(e){var r,o,c,s,l,u,d,b,A;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Fetching Lotteries..."),r=(new TextEncoder).encode(p.e),o=n.from(r).toString("base64"),t.next=5,p.d.searchForTransactions().notePrefix(o).txType("appl").minRound(p.f).do();case 5:c=t.sent,s=[],l=Object(a.a)(c.transactions),t.prev=8,l.s();case 10:if((u=l.n()).done){t.next=20;break}if(d=u.value,!(b=d["created-application-index"])){t.next=18;break}return t.next=16,N(b,e);case 16:(A=t.sent)&&s.push(A);case 18:t.next=10;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(8),l.e(t.t0);case 25:return t.prev=25,l.f(),t.finish(25);case 28:return console.log("Lotteries Fetched..."),t.abrupt("return",s);case 30:case"end":return t.stop()}}),t,null,[[8,22,25,28]])})));return function(n){return t.apply(this,arguments)}}(),N=function(){var n=Object(r.a)(i.a.mark((function n(t,e){var a,r,o,c,s,l,b,A,x,g;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.d.lookupApplications(t).includeAll(!0).do();case 3:if(!(a=n.sent).application.deleted){n.next=6;break}return n.abrupt("return",null);case 6:return r=a.application.params["global-state"],(o=JSON.parse(JSON.stringify(p.c))).appId=t,o.appAddress=u.a.getApplicationAddress(t),o.creatorAddress=a.application.params.creator,void 0!==w("DURATION",r)&&(o.lottery_duration=w("DURATION",r).value.uint),void 0!==w("START",r)&&(o.lottery_start_time=w("START",r).value.uint),void 0!==w("END",r)&&(o.lottery_end_time=w("END",r).value.uint),void 0!==w("PLAYERS",r)&&(o.total_no_of_players=w("PLAYERS",r).value.uint),void 0!==w("TICKETS",r)&&(o.total_no_of_tickets=w("TICKETS",r).value.uint),void 0!==w("PRICE",r)&&(o.ticket_price=w("PRICE",r).value.uint),void 0!==w("POOL",r)&&(o.prize_pool=w("POOL",r).value.uint),void 0!==w("STATUS",r)&&(o.status=w("STATUS",r).value.uint),void 0!==w("WINNINGTICKET",r)&&(o.winning_ticket=w("WINNINGTICKET",r).value.uint),void 0!==w("STARTER",r)&&(c=w("STARTER",r).value.bytes)&&(o.starter=u.a.encodeAddress(d.a.toUint8Array(c))),void 0!==w("ENDER",r)&&(s=w("ENDER",r).value.bytes)&&(o.ender=u.a.encodeAddress(d.a.toUint8Array(s))),void 0!==w("WINNER",r)&&(l=w("WINNER",r).value.bytes)&&(o.winner=u.a.encodeAddress(d.a.toUint8Array(l))),void 0!==w("NEXTLOTTERY",r)&&(o.next_lottery_fund=w("NEXTLOTTERY",r).value.uint),void 0!==w("PREVAPP",r)&&(o.prev_app=w("PREVAPP",r).value.uint),void 0!==w("WINNERREWARD",r)&&(o.winner_reward=w("WINNERREWARD",r).value.uint),n.next=28,p.d.lookupAccountAppLocalStates(e).do();case 28:for(b=n.sent,A=b["apps-local-states"],x=0;x<A.length;x++)t===A[x].id&&(g=A[x]["key-value"],void 0!==w("ID",g)&&(o.user_id=w("ID",g).value.uint),void 0!==w("TICKETCOUNT",g)&&(o.user_no_of_tickets=w("TICKETCOUNT",g).value.uint),void 0!==w("ISWINNER",g)&&(o.user_is_winner=w("ISWINNER",g).value.uint));return n.abrupt("return",o);case 34:return n.prev=34,n.t0=n.catch(0),n.abrupt("return",null);case 37:case"end":return n.stop()}}),n,null,[[0,34]])})));return function(t,e){return n.apply(this,arguments)}}(),w=function(n,t){return t.find((function(t){return t.key===Object(x.e)(n)}))};function I(n,t){var e=new Date,a=new Date(1e3*t);if(1===n&&0!==t&&e>a)return"TIME EXHAUSTED, END LOTTERY TO GET LUCKY WINNER";switch(n){case 0:return"START LOTTERY";case 1:return"LOTTERY IS ACTIVE";case 2:return"LOTTERY ENDED";case 3:return"WINNERS AWARDED, START NEW LOTTERY";default:return"CREATE NEW LOTTERY"}}}).call(this,e(16).Buffer)},305:function(n,t,e){},308:function(n,t,e){},312:function(n,t,e){"use strict";e.r(t);var a=e(0),r=e.n(a),o=e(35),c=e.n(o),s=e(13),i=e(4),l=e(8),u=e.n(l),p=e(319),d=e(323),b=e(6),A=e(18),x=(e(295),e(1)),g=function(){return Object(x.jsx)(A.a,{position:"bottom-center",autoClose:5e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0})},j=function(n){var t=n.text;return Object(x.jsxs)("div",{children:[Object(x.jsx)("i",{className:"bi bi-check-circle-fill text-success mx-2"}),Object(x.jsx)("span",{className:"text-secondary mx-1",children:t})]})},_=function(n){var t=n.text;return Object(x.jsxs)("div",{children:[Object(x.jsx)("i",{className:"bi bi-x-circle-fill text-danger mx-2"}),Object(x.jsx)("span",{className:"text-secondary mx-1",children:t})]})},f={text:""};j.defaultProps=f,_.defaultProps=f;var m=e(320),O=e(318),h=e(324),y=e(15),T=e(2),v=e(3),N=e(171),w=e.n(N),I=["size","address"],k=function(n){var t=n.size,e=n.address,a=Object(v.a)(n,I);return Object(x.jsx)("div",Object(T.a)(Object(T.a)({},a),{},{style:{width:"".concat(t,"px"),height:"".concat(t,"px")},children:Object(x.jsx)(w.a,{diameter:t,seed:parseInt(e.slice(2,10),16)})}))},E=function(n){var t=n.address,e=n.name,a=n.amount,r=n.symbol,o=n.disconnect;return t?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(m.a,{children:[Object(x.jsxs)(m.a.Toggle,{variant:"light",align:"end",id:"dropdown-basic",className:"d-flex align-items-center border rounded-pill py-1",children:[a?Object(x.jsxs)(x.Fragment,{children:[Object(y.b)(a),Object(x.jsxs)("span",{className:"ms-1",children:[" ",r]})]}):Object(x.jsx)(O.a,{animation:"border",size:"sm",className:"opacity-25"}),Object(x.jsx)(k,{address:t,size:28,className:"ms-2 me-1"})]}),Object(x.jsxs)(m.a.Menu,{className:"shadow-lg border-0",children:[Object(x.jsx)(m.a.Item,{href:"https://testnet.algoexplorer.io/address/".concat(t),target:"_blank",children:Object(x.jsxs)(h.a,{direction:"horizontal",gap:2,children:[Object(x.jsx)("i",{className:"bi bi-person-circle fs-4"}),Object(x.jsxs)("div",{className:"d-flex flex-column",children:[e&&Object(x.jsx)("span",{className:"font-monospace",children:e}),Object(x.jsx)("span",{className:"font-monospace",children:Object(y.d)(t)})]})]})}),Object(x.jsx)(m.a.Divider,{}),Object(x.jsxs)(m.a.Item,{as:"button",className:"d-flex align-items-center",onClick:function(){o()},children:[Object(x.jsx)("i",{className:"bi bi-box-arrow-right me-2 fs-4"}),"Disconnect"]})]})]})}):null},S=e(172),C=function(n){var t=n.name,e=n.connect,a=n.coverImg;return Object(x.jsxs)("div",{className:"d-flex justify-content-center flex-column text-center ",style:{background:"#000",minHeight:"100vh"},children:[Object(x.jsxs)("div",{className:"mt-auto text-light mb-5",children:[Object(x.jsx)("div",{className:" ratio ratio-1x1 mx-auto mb-2",style:{maxWidth:"320px"},children:Object(x.jsx)("img",{src:a,alt:""})}),Object(x.jsx)("h1",{className:"mt-auto text-light",children:t}),Object(x.jsx)("p",{className:"mt-auto text-light",children:"Please connect your wallet to continue."}),Object(x.jsx)(S.a,{onClick:function(){return e()},variant:"outline-light",className:"rounded-pill px-3 mt-3",children:"Connect Wallet"})]}),Object(x.jsx)("p",{className:"mt-auto text-secondary",children:"Powered by NEAR"})]})};C.defaultProps={name:""};var R=C,L=function(){return Object(x.jsx)("div",{className:"d-flex justify-content-center",children:Object(x.jsx)(O.a,{animation:"border",role:"status",className:"opacity-25",children:Object(x.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},P=function(n){var t=n.Lotteries,e=n.checkIfWinner,r=Object(a.useState)(!1),o=Object(i.a)(r,2),c=o[0],l=o[1],p=Object(a.useState)(t.length-2),d=Object(i.a)(p,2),b=d[0],A=d[1],g=Object(a.useState)(t[b]),j=Object(i.a)(g,2),_=j[0],f=j[1],m=function(){return 0!==_.user_id},O=function(){var n=Object(s.a)(u.a.mark((function n(e){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l(!0),e.preventDefault(),!((a=b-1)<0)){n.next=6;break}return l(!1),n.abrupt("return");case 6:f(t[a]),A(a),l(!1);case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),h=function(){var n=Object(s.a)(u.a.mark((function n(e){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l(!0),e.preventDefault(),!((a=b+1)>=t.length-1)){n.next=6;break}return l(!1),n.abrupt("return");case 6:f(t[a]),A(a),l(!1);case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{className:"tabs-container header",children:Object(x.jsx)("div",{className:"tab",children:"Lottery History"})}),Object(x.jsx)("div",{className:"lottery-container",children:c?Object(x.jsx)(L,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"lottery-header",children:[Object(x.jsxs)("div",{className:"round-details",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"ID: "})," ",Object(x.jsx)("span",{className:"round-num",children:_.appId})]}),Object(x.jsxs)("div",{className:"rounds-nav",children:[Object(x.jsx)("a",{href:"/#",onClick:O,className:"prev",children:"\u2190"}),Object(x.jsx)("a",{href:"/#",onClick:h,className:"next",children:"\u2192"})]})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Drawn: "})," ",Object(y.a)(_.lottery_end_time)]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Winner: "}),0===_.user_is_winner&&m()?"Check if you're the winner ":2===_.user_is_winner?"Congratulations You won ":1===_.user_is_winner?"Sorry You Lost ":""," ",(!m()||0!==_.user_is_winner)&&Object(x.jsx)("a",{href:"https://testnet.algoexplorer.io/address/".concat(_.winner),target:"_blank",rel:"noreferrer",children:"View Winner"})]})]}),Object(x.jsxs)("div",{className:"lottery-body",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Price Per Ticket: "})," ",Object(y.b)(_.ticket_price)," ALGO"]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"No of Tickets Sold: "})," ",_.total_no_of_tickets]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Participants: "}),_.total_no_of_players]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Prize: "})," ",Number(Object(y.b)(_.winner_reward))," NEAR"]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Your Tickets: "}),_.user_no_of_tickets]})]}),Object(x.jsx)("div",{className:"lottery-footer",children:m()&&0===_.user_is_winner&&Object(x.jsx)(S.a,{variant:"success",className:"check-if-winner",onClick:function(){return e(_)},children:"Check if you won"})})]})})]})})},D=e(321),F=e(322),W=e(173),z=function(n){var t=n.lottery,e=n.open,r=n.onClose,o=n.buyTicket,c=Object(a.useState)(0),s=Object(i.a)(c,2),l=s[0],u=s[1],p=Object(a.useState)(0),d=Object(i.a)(p,2),b=d[0],A=d[1];return Object(x.jsxs)(D.a,{show:e,onHide:r,children:[Object(x.jsx)(D.a.Header,{closeButton:!0,children:Object(x.jsx)(D.a.Title,{children:"Buy TIckets"})}),Object(x.jsxs)(D.a.Body,{children:[Object(x.jsxs)("p",{children:["Ticket Price: ",Object(y.b)(t.ticket_price)," ALGO"]}),Object(x.jsxs)("p",{children:["You Pay: ",l," ALGO"]}),Object(x.jsxs)(F.a,{onSubmit:function(){b&&(o(t,b),r())},children:[Object(x.jsx)(W.a,{controlId:"floatingNoOfTickets",label:"Number Of Tickets",className:"mb-3",children:Object(x.jsx)(F.a.Control,{type:"number",min:1,max:9,onChange:function(n){return function(n){var e=n.target.value,a=Object(y.b)(t.ticket_price)*e;A(e),u(a)}(n)},placeholder:"Number of Tickets"})}),Object(x.jsx)(D.a.Footer,{children:Object(x.jsx)(S.a,{variant:"success",type:"submit",disabled:!b,children:"Pay Now"})})]})]})]})},U=function(n){var t=n.lotteries,e=n.open,r=n.onClose,o=n.createNewLottery,c=Object(a.useState)(0),s=Object(i.a)(c,2),l=s[0],u=s[1],p=Object(a.useState)(0),d=Object(i.a)(p,2),b=d[0],A=d[1],g=Object(a.useCallback)((function(){return l>0&&b>0}),[l,b]);return Object(x.jsxs)(D.a,{show:e,onHide:r,centered:!0,children:[Object(x.jsx)(D.a.Header,{closeButton:!0,children:Object(x.jsx)(D.a.Title,{children:"New Lottery"})}),Object(x.jsx)(D.a.Body,{children:Object(x.jsxs)(F.a,{onSubmit:function(n){if(n.preventDefault(),g()){var e=t.length;o({duration:l,ticketPrice:b},t[e-1]),u(0),A(0),r()}},children:[Object(x.jsx)(W.a,{controlId:"inputPrice",label:"Tickets Price",className:"mb-3",children:Object(x.jsx)(F.a.Control,{type:"number",onChange:function(n){A(Object(y.c)(n.target.value))},placeholder:"Tickets Price"})}),Object(x.jsx)(W.a,{controlId:"inputDuration",label:"Duration in Minutes",className:"mb-3",children:Object(x.jsx)(F.a.Control,{type:"number",onChange:function(n){u(60*n.target.value)},placeholder:"Duration in Minutes"})}),Object(x.jsx)(D.a.Footer,{children:Object(x.jsx)(S.a,{variant:"success",disabled:!g(),type:"submit",children:"Create New Lottery"})})]})})]})},Y=e(30),B=function(n){var t=n.address,e=n.fetchBalance,r=Object(a.useState)(!1),o=Object(i.a)(r,2),c=o[0],l=o[1],p=Object(a.useState)([]),d=Object(i.a)(p,2),g=d[0],f=d[1],m=Object(a.useState)({}),O=Object(i.a)(m,2),h=O[0],T=O[1],v=Object(a.useState)(!1),N=Object(i.a)(v,2),w=N[0],I=N[1],k=Object(a.useState)(!1),E=Object(i.a)(k,2),C=E[0],R=E[1],D=Object(a.useCallback)(Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l(!0),Y.h(t).then((function(n){if(n.length>0){if(f(n),n.length>0){var t=n[n.length-1];T(t)}}else{var e=[];e.push(b.c),f(e),T(b.c)}})).catch((function(n){console.log(n)})).finally((function(n){l(!1)}));case 2:case"end":return n.stop()}}),n)}))),[t]),F=function(){var n=Object(s.a)(u.a.mark((function n(a,r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l(!0),Y.e(t,a,r).then((function(){Object(A.b)(Object(x.jsx)(j,{text:"New Lottery created successfully"})),D(t),e(t)})).catch((function(n){console.log(n),Object(A.b)(Object(x.jsx)(_,{text:"Failed to create new Lottery"})),l(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),W=function(){var n=Object(s.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l(!0),Y.j(t,a).then((function(){Object(A.b)(Object(x.jsx)(j,{text:"Lottery Started"})),D(t),e(t)})).catch((function(n){console.log(n),Object(A.b)(Object(x.jsx)(_,{text:"Failed to start Lottery"})),l(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),B=function(){var n=Object(s.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l(!0),Y.i(t,a).then((function(){Object(A.b)(Object(x.jsx)(j,{text:"Lottery joined successfully"})),D(t),e(t)})).catch((function(n){console.log(n),Object(A.b)(Object(x.jsx)(_,{text:"Failed to join Lottey"})),l(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),G=function(){var n=Object(s.a)(u.a.mark((function n(a,r){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l(!0),Y.b(t,a,r).then((function(){Object(A.b)(Object(x.jsx)(j,{text:"Tickets bought successfully"})),D(t),e(t)})).catch((function(n){console.log(n),Object(A.b)(Object(x.jsx)(_,{text:"Failed to purchase Ticket"})),l(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),K=function(){var n=Object(s.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l(!0),Y.g(t,a).then((function(){Object(A.b)(Object(x.jsx)(j,{text:"Lottery closed"})),D(t),e(t)})).catch((function(n){console.log(n),Object(A.b)(Object(x.jsx)(_,{text:"Failed to end Lottey"})),l(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),H=function(){var n=Object(s.a)(u.a.mark((function n(a){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l(!0),Y.c(t,a).then((function(){Object(A.b)(Object(x.jsx)(j,{text:"Check completed"})),D(t),e(t)})).catch((function(n){console.log(n),Object(A.b)(Object(x.jsx)(_,{text:"Check failed"})),l(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),Z=function(){return new Date>=new Date(1e3*h.lottery_end_time)},M=function(n){return h.status===n},V=function(){return 0!==h.user_id},X=function(){var n=Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:0===h.appId||Z()&&(M(2)||M(3))?R(!0):M(0)&&0!==h.lottery_duration?W(h):M(1)&&!Z()?V()?I(!0):B(h.appId):M(1)&&Z()&&K(h);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){D(t)}),[t,D]),Object(x.jsxs)(x.Fragment,{children:[c?Object(x.jsx)(L,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{className:"tabs-container header",children:0!==h.status?Object(x.jsx)("div",{className:"tab",children:"Current Lottery"}):Object(x.jsx)("div",{className:"tab",children:"Lottery DApp will be starting soon.."})}),Object(x.jsxs)("div",{className:"lottery-container",children:[Object(x.jsx)("div",{className:"lottery-header",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"ID: "})," ",Object(x.jsx)("span",{className:"round-num",children:h.appId})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Status: "})," ",Y.d(h.status,h.lottery_end_time)]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:M(0)?"Lottery Duration: ":M(1)?"Lottery Ends: ":"Lottery Ended: "})," ",M(0)?"".concat(h.lottery_duration/60," Mins"):Object(y.a)(h.lottery_end_time)]}),Z()&&M(2)&&V()&&Object(x.jsxs)("div",{className:"winner",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Winner: "}),0===h.user_is_winner&&V()?"Check if you're the winner ":2===h.user_is_winner?"Congratulations You won ":1===h.user_is_winner?"Sorry You Lost ":""," ",(!V()||0!==h.user_is_winner)&&Object(x.jsx)("a",{href:"https://testnet.algoexplorer.io/address/".concat(h.winner),target:"_blank",rel:"noreferrer",children:"View Winner"})]}),0===h.user_is_winner&&Object(x.jsxs)("div",{className:"button-body",children:[" ",Object(x.jsx)(S.a,{variant:"success",className:"check-if-winner right",onClick:function(){return H(h)},children:"Check"})]})]})]})}),Object(x.jsxs)("div",{className:"lottery-body",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Price Per Ticket: "})," ",h.ticket_price?Number(Object(y.b)(h.ticket_price)):0," ","ALGO"]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"No Of tickets Sold: "}),h.total_no_of_tickets]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Participants: "}),h.total_no_of_players]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Prize: "})," ",h.winner_reward?Number(Object(y.b)(h.winner_reward)):h.prize_pool?Number(Object(y.b)(h.prize_pool))/2:0," ","ALGO"]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Your Tickets: "}),h.user_no_of_tickets]})]}),Object(x.jsx)("div",{className:"lottery-footer",children:Object(x.jsx)(S.a,{variant:"success",className:"buy-lottery-btn",onClick:function(){return X()},children:0===h.appId||Z()&&(M(2)||M(3))?"Create New Lottery":M(0)&&0!==h.lottery_duration?"Start Lottery":M(1)&&!Z()?V()?"Buy Tickets":"Join Lottery":M(1)&&Z()?h.total_no_of_tickets>5||h.total_no_of_players>2?"End Lottery":"Restart Lottery":void 0})})]})]}),g.length>1&&Object(x.jsx)(P,{Lotteries:g,checkIfWinner:H})]}),w&&Object(x.jsx)(z,{lottery:h,open:w,onClose:function(){return I(!1)},buyTicket:G}),C&&Object(x.jsx)(U,{lotteries:g,open:C,onClose:function(){return R(!1)},createNewLottery:F})]})},G=e.p+"static/media/balls.d5e927bd.png",K=(e(305),function(){var n=Object(a.useState)(null),t=Object(i.a)(n,2),e=t[0],r=t[1],o=Object(a.useState)(null),c=Object(i.a)(o,2),l=c[0],A=c[1],j=Object(a.useState)(0),_=Object(i.a)(j,2),f=_[0],m=_[1],O=function(){var n=Object(s.a)(u.a.mark((function n(t){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:b.d.lookupAccountByID(t).do().then((function(n){var t=n.account.amount;m(t)})).catch((function(n){console.log(n)}));case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),h=function(){var n=Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:b.g.connect().then((function(n){var t=n[0];r(t.address),A(t.name),O(t.address)})).catch((function(n){console.log("Could not connect to MyAlgo wallet"),console.error(n)}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{}),e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(p.a,{fluid:"md",className:"hero",children:[Object(x.jsx)(d.a,{className:"justify-content-end pt-3 pb-5",children:Object(x.jsx)(d.a.Item,{children:Object(x.jsx)(E,{address:e,name:l,amount:f,disconnect:function(){r(null),A(null),m(null),window.location.reload()},symbol:"ALGO"})})}),Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("p",{className:"title light",children:"Algorand Lottery DApp"}),Object(x.jsx)("p",{className:"subtitle light",children:"A lottery platform built on the Algorand Blockchain \ud83d\udd26"})]})]}),Object(x.jsx)(B,{address:e,fetchBalance:O})]}):Object(x.jsx)(R,{name:"Algorand Lottery DApp",connect:h,coverImg:G})]})}),H=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,325)).then((function(t){var e=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;e(n),a(n),r(n),o(n),c(n)}))};e(308),e(309),e(310),e(311);c.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(K,{})}),document.getElementById("root")),H()},6:function(n,t,e){"use strict";e.d(t,"b",(function(){return A})),e.d(t,"d",(function(){return x})),e.d(t,"g",(function(){return g})),e.d(t,"f",(function(){return j})),e.d(t,"e",(function(){return _})),e.d(t,"k",(function(){return f})),e.d(t,"j",(function(){return m})),e.d(t,"i",(function(){return O})),e.d(t,"h",(function(){return h})),e.d(t,"a",(function(){return y})),e.d(t,"c",(function(){return T}));var a=e(11),r=e.n(a),o=e(168),c=e.n(o),s=e(30),i="",l="https://node.testnet.algoexplorerapi.io",u="",p="",d="https://algoindexer.testnet.algoexplorerapi.io",b="",A=new r.a.Algodv2(i,l,u),x=new r.a.Indexer(p,d,b),g=new c.a,j=21540981,_="algorandlottery:uv2",f=3,m=13,O=16,h=3,y=6,T=new s.a(0,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY5HFKQ","AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY5HFKQ",0,0,0,0,0,0,0,100,0,"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY5HFKQ","AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY5HFKQ","AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY5HFKQ",0,0,0,0,0,0)}},[[312,1,2]]]);
//# sourceMappingURL=main.4231a449.chunk.js.map